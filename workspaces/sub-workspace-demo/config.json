{
  "enabled": true,
  "template": "main-infrastructure",
  "deploy_schedule": "0 9 * * 1-5",
  "destroy_schedule": "0 18 * * 1-5",
  "description": "Demo of sub-workspace deployment using @deployment triggers",
  "jobs": [
    {
      "name": "network-foundation",
      "type": "template",
      "schedule": "@deployment",
      "template": "vpc-subnets",
      "timeout": "10m",
      "enabled": true,
      "description": "Deploy network foundation (VPC, subnets)"
    },
    {
      "name": "database-cluster",
      "type": "template",
      "schedule": "@deployment",
      "template": "postgres-cluster",
      "depends_on": ["network-foundation"],
      "timeout": "20m",
      "enabled": true,
      "description": "Deploy PostgreSQL cluster after network foundation"
    },
    {
      "name": "cache-cluster",
      "type": "template",
      "schedule": "@deployment",
      "template": "redis-cluster",
      "depends_on": ["network-foundation"],
      "timeout": "15m",
      "enabled": true,
      "description": "Deploy Redis cache cluster after network foundation"
    },
    {
      "name": "application-stack",
      "type": "template",
      "schedule": "@deployment",
      "template": "web-application",
      "depends_on": ["database-cluster", "cache-cluster"],
      "timeout": "15m",
      "enabled": true,
      "description": "Deploy application stack after database and cache"
    },
    {
      "name": "monitoring-stack",
      "type": "template",
      "schedule": "@deployment",
      "template": "prometheus-grafana",
      "depends_on": ["application-stack"],
      "timeout": "10m",
      "enabled": true,
      "description": "Deploy monitoring stack after application is ready"
    },
    {
      "name": "setup-dns",
      "type": "script",
      "schedule": "@deployment",
      "script": "#!/bin/bash\necho 'Configuring DNS records for deployed infrastructure'\n# Add DNS configuration logic here\necho 'DNS setup completed'",
      "timeout": "5m",
      "enabled": true,
      "description": "Configure DNS records after infrastructure deployment"
    },
    {
      "name": "cleanup-failed-deployment",
      "type": "script",
      "schedule": "@deployment-failed",
      "script": "#!/bin/bash\necho 'Cleaning up after failed deployment'\n# Add cleanup logic here\necho 'Cleanup completed'",
      "timeout": "10m",
      "enabled": true,
      "description": "Cleanup resources after failed deployment"
    },
    {
      "name": "regular-backup",
      "type": "script",
      "schedule": "0 2 * * *",
      "script": "#!/bin/bash\necho 'Running nightly backup'\n# Regular time-based job, not event-based\necho 'Backup completed'",
      "timeout": "30m",
      "enabled": true,
      "description": "Regular nightly backup (time-based, not event-based)"
    }
  ]
}